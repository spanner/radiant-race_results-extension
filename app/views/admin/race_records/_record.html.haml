- cssclass = f.object.new_record? ? 'adding subform' : 'subform'
%p{:class => cssclass}
  = f.label :race_category, "Category"
  = f.select("race_category_id", RaceCategory.all.collect {|rc| [ rc.name, rc.id ] }, {:class => 'record_category'})
  = f.label :elapsed_time, "Time"
  = f.text_field :elapsed_time, :class => 'record_time'
  = f.label :holder, "Holder"
  = f.text_field :holder, :class => 'record_holder'
  = f.label :year, "Year"
  = f.text_field :year, :class => 'record_year'
  - if f.object.new_record?
    = link_to_function "cancel", "this.up('.subform').remove()"
  - else
    = f.check_box '_delete', { :onclick=>"this.checked ? this.up('.subform').addClassName('deleting') : this.up('.subform').removeClassName('deleting')" , :class => 'record_delete'}
    = f.label '_delete', 'delete', :class => 'quiet'
